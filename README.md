## JVM vs GraalVM Micronaut web server comparison
The app is using Micronaut framework to server one `GET` endpoint called `test
This endpoint connects to MySQL database and returns uuid generated by daabase to emulate real application behaviour.

Steps to follow to perform your own tests:
### JVM:
Build the project
```shell
./gradlew assemble
```
Create JVM docker image with name performance-test
```shell
docker build -t performance-test .
```
Start docker containers
```shell
docker-compose up -d
```
Perform test using Apache JMeter or other tool.
```shell
http://localhost:8080/test?value=test
```
### GraalVM
Build the image
```shell
./gradlew dockerBuildNative
```
Run the image where 6ea095a128e8 is the image id from the previous command
```shell
 docker run --cpus 1 -d --rm -p 8081:8080 6ea095a128e8
```
Perform test using Apache JMeter or other tool.
```shell
http://localhost:8081/test?value=test
```
### Methodology
I have tested the app using 100, 500 and 1000 users at the same time. The results are in the .csv files in the analytics directory.

In the analytics directory there are 2 python script to analyze data.

comparison.py takes 6 csv files and shows a chart.
```shell
python3 comparison.py
```

singlefile.py takes filename as an argument and prints throughput chart
```shell
python3 singlefile.py jvm-100.csv
```



### Results
GraalVM variant is slower than JVM, with GraalVM having very stable performance in opposition to JVM.
JVM had a memory footprint of around 60MiB while GraalVM took 400MiB. The startup for GraalVM is 23x faster(17ms vs 401ms).
JVM has much faster compilation time.

Comparison
![Comparison](https://user-images.githubusercontent.com/10707925/273477949-8390dc2c-2fe5-45f8-84c4-0a3be325034c.png)

JVM 500 users throughput
![JVM500](https://user-images.githubusercontent.com/10707925/273478109-f846327d-ff78-44fe-b7dc-831f075db306.png)

GraalVM 500 users throughput
![GraalVM500](https://user-images.githubusercontent.com/10707925/273478110-5fbad0a8-1127-4b14-8a92-515f84f86293.png)

Memory - first container being JVM and second one being GraalVM
![Memory](https://user-images.githubusercontent.com/10707925/273477951-2f6c9f79-e9b6-4aa8-9205-f951d8113d2c.png)
